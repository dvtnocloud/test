version: '3.7'
services:
  webtop:
    image: linuxserver/webtop:latest
    container_name: linux-webtop
    restart: always

    # Railway: Public port 3000
    ports:
      - "3000:3000"

    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Asia/Ho_Chi_Minh
      - KEYBOARD=en
      - TITLE=Linux Webtop
      # Nháº­p token ngrok bÃªn Railway Variables
      - NGROK_AUTHTOKEN=${NGROK_AUTHTOKEN}
      - NGROK_REGION=ap

    shm_size: "1gb"

    command: >
      sh -c "
      echo 'ğŸ”§ Äang khá»Ÿi cháº¡y Linux Webtop...';
      (ngrok config add-authtoken $NGROK_AUTHTOKEN || true);
      (ngrok http --region=${NGROK_REGION} 3000 >/ngrok.log 2>&1 &) &&
      echo 'ğŸŒ Ngrok Ä‘ang cháº¡y - xem log báº±ng: docker logs -f linux-webtop';
      sleep 2;
      cat /ngrok.log;
      /init
      "
